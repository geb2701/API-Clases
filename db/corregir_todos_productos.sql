-- =====================================================
-- SCRIPT PARA CORREGIR TODOS LOS PRODUCTOS CON ACENTOS
-- =====================================================

USE ecommerce_db;
SET NAMES utf8mb4;

SET FOREIGN_KEY_CHECKS = 0;

-- Asegurar utf8mb4
ALTER TABLE products MODIFY name VARCHAR(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;
ALTER TABLE products MODIFY description TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;

-- Producto 99: Libro: Python Avanzado
-- Descripción correcta: 'Guía completa de programación avanzada en Python. 500 páginas con ejemplos prácticos.'
UPDATE products 
SET description = UNHEX('4775C3AD6120636F6D706C6574612064652070726F6772616D616369C3B36E206176616E7A61646120656E20507974686F6E2E203530302070C3A167696E617320636F6E20656A656D706C6F73207072C3A1637469636F732E'),
    updated_at = NOW()
WHERE id = 99;

-- Producto 100: Guía: Algoritmos y Estructuras
UPDATE products 
SET name = UNHEX('4775C3AD613A20416C676F7269746D6F732079204573747275637475726173'),
    description = UNHEX('4D616E75616C20636F6D706C65746F20646520616C676F7269746D6F7320636F6E20696D706C656D656E746163696F6E657320656E206DC3BA6C7469706C6573206C656E6775616A65732E'),
    updated_at = NOW()
WHERE id = 100;

-- Producto 101: Libro: Machine Learning
UPDATE products 
SET description = UNHEX('496E74726F6475636369C3B36E20616C20617072656E64697A616A65206175746F6DC3A17469636F20636F6E206361736F73207072C3A1637469636F732E'),
    updated_at = NOW()
WHERE id = 101;

-- Producto 102: Manual: Seguridad Cibernética  
UPDATE products 
SET name = UNHEX('4D616E75616C3A205365677572696461642043696265726EC3A974696361'),
    description = UNHEX('4775C3AD61207072C3A163746963612064652063696265727365677572696461642070617261206465736172726F6C6C61646F7265732E'),
    updated_at = NOW()
WHERE id = 102;

SET FOREIGN_KEY_CHECKS = 1;

-- Verificar
SELECT '=== PRODUCTOS CORREGIDOS ===' as estado;
SELECT id, name, LEFT(description, 60) as descripcion 
FROM products 
WHERE id IN (99, 100, 101, 102)
ORDER BY id;

SELECT 'Todos los productos corregidos!' as Resultado;

